//=============================================================================
//
// タイトルの処理 [title.cpp]
// Author : 佐藤安純
//
//=============================================================================
#include "title.h"
#include "main.h"
#include "renderer.h"
#include "manager.h"
#include "input.h"
#include "fade.h"
#include "sound.h"
#include "ranking.h"
#include "loadText.h"

//*****************************************************************************
// マクロ定義
//*****************************************************************************
#define FADE_TIME	(60 * 5)
#define LOAD_UI		("data\\TEXT\\UI\\Title.txt")

//*****************************************************************************
// プロトタイプ宣言
//*****************************************************************************

//*****************************************************************************
// 静的メンバ変数
//*****************************************************************************

//=============================================================================
// デフォルトコンストラクタ
//=============================================================================
CTitle::CTitle(){}

//=============================================================================
// デストラクタ
//=============================================================================
CTitle::~CTitle(){}

//=============================================================================
// 初期化処理
//=============================================================================
void CTitle::Init(void)
{
	//ベースの初期化
	CModeBase::Init();

	//UI情報の読み込み処理
	LoadUI(LOAD_UI);
}
//=============================================================================
// 終了処理
//=============================================================================
void CTitle::Uninit(void)
{
	//ベースの破棄
	CModeBase::Uninit();

	//フェード以外削除
	CScene::ReleaseFade();
}

//=============================================================================
// 更新処理
//=============================================================================
void CTitle::Update(void)
{
	//サウンドの情報
	CSound *pSound = CManager::GetSound();

	//	タイトルのカウンター加算
	m_nCounter++;

	//インプットの取得　
	CGamePad	*pGamePad = CManager::GetInputGamePad();
	CInputKeyboard * pKeyboard = CManager::GetInputkeyboard();

	if (pKeyboard->GetKeyboardTrigger(DIK_RETURN) == true)
	{
		if (CFade::GetFadeMode() != CFade::FADE_OUT)
		{
			CFade::SetFade(CManager::MODE_SELECT);
		}
	}
	if ((m_nCounter > FADE_TIME))
	{
		if (CFade::GetFadeMode() != CFade::FADE_OUT)
		{
			CFade::SetFade(CManager::MODE_RANKING);
		}
	}
}

//=============================================================================
// 描画処理
//=============================================================================
void CTitle::Draw(void)
{
	CScene::DrawAll();
}